const btncargar=document.getElementById('btncargar');
const grupo=document.getElementById('grupo');
const fondo=document.getElementById('fondo');
const tablaGrupo=document.querySelector('#tablagrupo');

(()=>{
 
btncargar.addEventListener('click',cargarBotones);
grupo.addEventListener('click',delegacion);

})();

(()=>{
var color=localStorage.getItem('colorfondo');
//console.log(color);
if(color===null){
    fondo.className=('bg-dark');
}else{
    fondo.className=color;
}

})();

function delegacion(e)
{
	e.preventDefault();
	//console.log(e.target.id);

	const colorboton=e.target.id;

	switch(colorboton)
	{
	 case('1'):
	 //console.log('oe');
	 
	 fondo.className='bg-primary';
     localStorage.setItem('colorfondo',"bg-primary");
     cargarTabla();
     cargarApi();
     
     break;

     case('2'):
      console.log('diste click en btn-success');
       fondo.className='bg-success';
        localStorage.setItem('colorfondo',"bg-success");
         tablaGrupo.innerHTML='';
     break;

     case('3'):
     	 console.log('diste click en btn-danger');
     	  fondo.className='bg-danger';
           localStorage.setItem('colorfondo',"bg-danger");
     break;

     case('4'):
     	 console.log('diste click en btn-warning');
     	  fondo.className='bg-warning';
           localStorage.setItem('colorfondo',"bg-warning");
     break;

     case('5'):
     	 console.log('diste click en btn-secondary');
     	  fondo.className='bg-secondary';
           localStorage.setItem('colorfondo',"bg-secondary");
     break;


	}
	

}



function cargarBotones(e)
{
	e.preventDefault();

grupo.innerHTML=`
<button class="btn btn-primary" id="1">primary</button>
    	<button class="btn btn-success" id="2">success</button>
    	<button class="btn btn-danger"  id="3">danger</button>
    	<button class="btn btn-warning" id="4">warning</button>
    	<button class="btn btn-secondary" id="5">secondary</button>

`
}

//localStorage : guarda cadena de texto  clave=> valor
// set:guardar
// get: obtener

// const nombre='julian';
//  localStorage.setItem('nombre', nombre);


//api  

function cargarTabla()
{
   tablaGrupo.innerHTML=`
        <table class="table my-5 table-dark" id="tabla">
            <tr>
                <th>id</th>
                <th>nombre</th>
                <th>email</th>
                <th>estado</th>
            </tr>
            <tbody id="tablaDatos">
            
            </tbody>
        </table>

    `  
}
function cargarApi()
{
   
    var xhttp=new XMLHttpRequest();
    xhttp.open('GET','texto.json', true);
    xhttp.send();
    xhttp.onreadystatechange=function()
    {
        if(this.readyState==4 && this.status==200)
        {
            var arreglo=JSON.parse(this.responseText);

         
           
            const tablaDatos=document.querySelector('#tablaDatos');
            console.log(tablaDatos);

            tablaDatos.innerHTML='';

            for(var arr of arreglo)
            {
                tablaDatos.innerHTML+=`
                <tr>
                  <td>${arr.id}</td>
                  <td>${arr.nombre} </td>
                  <td>${arr.email} </td>
                  <td>${arr.estado ?"Activado":"Desactivado"}</td>
                </tr>

                `
            }

        }
    }
}

